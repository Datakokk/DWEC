<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
   
</head>
<body>
    <script>
        //pedir primera fecha dd/mm/aaaa
        //pedir segunda fecha
        //calcular diferencia dias

        const primeraFecha = pedirFecha();
        const segundaFecha = pedirFecha();
        const dif = calcularDiferenciaEnDias(primeraFecha,segundaFecha);
        imprimirDiferenciasEnDias(dif);

        //Formato fechas "dd/mm/aaaa"
        function calcularDiferenciaEnDias(fecha1, fecha2){
            fecha1 = Date.parse(fecha1.split('/').reverse().join('/'));
            fecha2 = Date.parse(fecha2.split('/').reverse().join('/'));

            return Math.abs(Math.trunc((fecha2 -fecha1) / (24 * 60 * 60 * 1000)));
        }

        //Calcular dias minutos y segundos.

        function imprimirDiferenciasEnDias(dif){
            document.write(" "+ dif+" ");
        }

        //Devolver una fecha en el formato dd/mm/aaa
        function pedirFecha(){
            let dia;
            let mes;
            let año;
            
            dia = solicitarDatosFecha("Introduce un dia: ","Los dias deben estar comprendidos entre 1 y 31",31);
            mes = solicitarDatosFecha("Introduce un mes: ","El mes debe estar comprendidos entre 1 y 12",12);
            año = pedirAnio("Introduce un año: ","El año debe de tener cuatro dígitos");
            
            return `${dia}/${mes}/${año}`;

        }

        //Función que solicita los datos de una fecha.
        function solicitarDatosFecha(msjPedir, msjAdvertencia, final){
            let repite = 0;
            let fecha;

            do{
                fecha = pedirNumero(msjPedir);
                repite++;
                
                if((repite >= 1) && !(fecha >= 1 && fecha <=final)){
                    alert(msjAdvertencia)
                }
            }while(!(fecha >= 1 && fecha <=final));
            return fecha;
        }

         //Función que solicita el año
         function pedirAnio(msjPedir, msjAdvertencia){
            
            let year;
            let digitos;
            
            do{
                year = pedirNumero(msjPedir);
                digitos = contarDigitos(year);
                if(!(digitos == 4)){
                    alert(msjAdvertencia);
                }
            }while(!(digitos == 4));
            return year;
        }

        //Función que cuenta la cantidad de dígitos de un número.
        function contarDigitos(numero){
            let contador = 0;
            while(numero >= 1){
                numero = numero / 10;
                contador++;
            }
            return contador;
        }

        function pedirNumero(texto = "Introduce un número: ", numero = 18){
            let dato;
            let referencia;

            do{
                dato = prompt(texto, numero);
                referencia = isNaN(dato);
                //referencia ? alert("Debe de introducir un número:") : false;
                referencia && alert('Debe de introducir un número:');
            }while(referencia);
            
            return dato;

        }    
    </script>
</body>
</html>